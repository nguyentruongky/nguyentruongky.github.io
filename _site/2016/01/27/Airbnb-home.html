<!DOCTYPE html>

<html>

  <head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    Airbnb Home screen sample - &lt; Code for life /&gt;
    
  </title>

  <meta name="description" content="">

  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="/assets/vendor/bootstrap/css/bootstrap.min.css">

  <link rel="stylesheet" href="/assets/vendor/font-awesome/css/font-awesome.min.css">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4001/2016/01/27/Airbnb-home.html">
  <link rel="alternate" type="application/rss+xml" title="&lt; Code for life /&gt;" href="/feed.xml">

</head>


  <body>

    <!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/"></a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about">About</a>
        </li>
        <!-- <li class="nav-item">
          <a class="nav-link" href="/posts">Posts</a>
        </li> -->
        <li class="nav-item">
          <a class="nav-link" href="/contact">Contact</a>
        </li>
      </ul>
    </div>
  </div>
</nav>


    <!-- Page Header -->

<!-- <header class="masthead" style="background-image: url('/img/posts/code_2.jpg')"> -->
<header class="masthead" style="background-image: url('/img/posts/code_2.jpg')">

  <div class="overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-lg-10 col-md-10 mx-auto">
        <div class="post-heading">
          <h1>Airbnb Home screen sample</h1>
          
          <h2 class="subheading" style="line-height:1.4">Simple Airbnb Home screen to demonstrate Collection View nested in a Table View</h2>
          
          <span class="meta">Posted by
            <a href="/about">Ky Nguyen</a>
            on January 27, 2016</span>
        </div>
      </div>
    </div>
  </div>
</header>

<div class="container">
  <div class="row">
    <div class="col-lg-10 col-md-10 mx-auto">

      <p><img src="https://firebasestorage.googleapis.com/v0/b/blogs-1de93.appspot.com/o/assets%2Fdemo.gif?alt=media&amp;token=cad709ea-eb96-498c-8e0d-5af864263ef5" alt="demo.gif" /></p>

<p>You can see it anywhere. It’s very popular in home screen, gallery screen. See how to do that.</p>
<ul>
  <li>Create new project.</li>
  <li>Remove ViewController.swift and the view controller in Main storyboard.</li>
  <li>Add TableViewController to storyboard. Don’t forget check <code class="highlighter-rouge">Is Initial View Controller</code></li>
  <li>Name the Table View Cell and Identifier <code class="highlighter-rouge">HeaderCell</code></li>
  <li>Set HeaderCell height to 400</li>
  <li>Design your cell look like this</li>
</ul>

<p><img src="https://firebasestorage.googleapis.com/v0/b/blogs-1de93.appspot.com/o/assets%2Fheadercelldesign.png?alt=media&amp;token=a2de60ef-625a-4864-bb73-d25f86d7ef54" alt="headerCellDesign.png" /></p>

<ul>
  <li>Add new file <code class="highlighter-rouge">HeaderCell.swift</code> and connect with our HeaderCell. Remember, <code class="highlighter-rouge">HeaderCell.swift</code> is subclass of UITableViewCell</li>
  <li>Clear all codes in file and connect outlets.</li>
</ul>

<p><img src="https://firebasestorage.googleapis.com/v0/b/blogs-1de93.appspot.com/o/assets%2Fconnectoutletheadercell.png?alt=media&amp;token=ccc8ff44-0995-4699-a395-06d0af605458" alt="connectOutletHeaderCell.png" /></p>

<ul>
  <li>Write a method to make the search button as a circle. Create a new file name <code class="highlighter-rouge">UIExtension.swift</code>. You see how it’s useful later.
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>extension UIView {    
func createBorder(color: UIColor = .white, width: CGFloat = 2) {
    self.layer.borderColor = color.CGColor
    self.layer.borderWidth = width
}
    
func createRoundCorner(radius: CGFloat = 4) {
    self.layer.cornerRadius = radius
    self.clipsToBounds = true
}
    
func createRoundCorner() {
    createRoundCorner(4)
}
    
func createBorderCorner() {
    createBorder()
    createRoundCorner()
}
    
func createCircleShape() {
    createRoundCorner(self.frame.size.width / 2)
}
}    
</code></pre></div>    </div>
    <p>If you don’t know about Extension yet, read more <a href="https://developer.apple.com/library/ios/documentation/Swift/Conceptual/Swift_Programming_Language/Extensions.html">here</a>. It’s awesome.</p>
  </li>
  <li>Back to HeaderCell, add <code class="highlighter-rouge">setupView()</code> method.
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>func setupView() {
searchButton.createCircleShape()
}    
</code></pre></div>    </div>
  </li>
  <li>Add a subclass of UITableViewController file name <code class="highlighter-rouge">HomescreenViewController.swift</code>, connect it to your Table View Controller in IB and clear all codes in files.</li>
  <li>Add some code
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class HomescreenTableViewController: UITableViewController {    
// It's the header of the sections. The first empty section header is use for header.
let sections = ["", "Recently View", "Favourite", "Suggestion"]  

override func numberOfSectionsInTableView(tableView: UITableView) -&gt; Int { return 1 }
    
override func tableView(tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {
    return sections.count }
	
override func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -&gt; UITableViewCell {
    let cell = tableView.dequeueReusableCellWithIdentifier("HeaderCell", forIndexPath: indexPath) as! HeaderCell
    cell.setupView()
    return cell
}
    
override func tableView(tableView: UITableView, heightForRowAtIndexPath indexPath: NSIndexPath) -&gt; CGFloat { return 400 }
}
</code></pre></div>    </div>
  </li>
  <li>Run app and you see header cell.</li>
</ul>

<p><img src="https://firebasestorage.googleapis.com/v0/b/blogs-1de93.appspot.com/o/assets%2Fhomescreenheadercomplete.png?alt=media&amp;token=fcc1ec80-71cf-4224-982c-9cef26b3f5f0" alt="homescreenHeaderComplete" /></p>

<ul>
  <li>Now is the main design of the screen. Add new Table View Cell, name and Reuse identifier is <code class="highlighter-rouge">PlaceCategory</code></li>
  <li>Change cell height to 400.</li>
  <li>Add a Collection View to your cell, set delegate and datasource to your <code class="highlighter-rouge">PlaceCategory</code> cell.</li>
  <li>Select the Collection View and set cell size to width: 300, height: 350. Set scroll direction to Horizontal.</li>
  <li>Select the Collection View Cell and set reuse identifier is <code class="highlighter-rouge">PlaceCell</code></li>
  <li>Design the PlaceCell like the UI.</li>
</ul>

<p><img src="https://truongky.files.wordpress.com/2016/01/placecategory.png" alt="placeCategory" /></p>

<ul>
  <li>Add new file (subclass of UITableViewCell), name <code class="highlighter-rouge">PlaceCategoryCell.swift</code>. Connect it to your PlaceCategoryCell and connect outlets to your file.</li>
  <li>Add new file (subclass of UICollectionViewCell), name <code class="highlighter-rouge">PlaceCollectionViewCell</code>. Connect it to your PlaceCell. Connect outlets to your file.</li>
</ul>

<p><img src="https://firebasestorage.googleapis.com/v0/b/blogs-1de93.appspot.com/o/assets%2Fplacecollectionviewcell_connectoutlet.png?alt=media&amp;token=244b013a-577a-4439-9474-2d49fd256aee" alt="placeCollectionViewCell_connectOutlet" /></p>

<ul>
  <li>Add <code class="highlighter-rouge">setupView()</code> method to your code
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>func setupView() {  
avatarImageView.createCircleShape()
}    
</code></pre></div>    </div>
  </li>
  <li>Back to <code class="highlighter-rouge">PlaceCategoryCell.swift</code> and add some codes.</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Model
class PlaceModel : NSObject {    
	var placeName = ""
	var shortDescription = ""
	var price: Int64 = 0
	var currency = ""
	var unit = ""
	var thumbnailImage: UIImage?
	var avatarImage: UIImage?
	var didWish = false
}
    
class PlaceCategoryTableViewCell: UITableViewCell, UICollectionViewDelegateFlowLayout, UICollectionViewDataSource {
	@IBOutlet weak var sectionLabel: UILabel!
	var placeList = [PlaceModel]()
	
	func collectionView(collectionView: UICollectionView, numberOfItemsInSection section: Int) -&gt; Int { return placeList.count }

	func collectionView(collectionView: UICollectionView, cellForItemAtIndexPath indexPath: NSIndexPath) -&gt; UICollectionViewCell {
		let cell = collectionView.dequeueReusableCellWithReuseIdentifier("PlaceCell", forIndexPath: indexPath) as! PlaceCollectionViewCell
		cell.setupView()
		let place = placeList[indexPath.row]
		cell.thumbnailImageView.image = place.thumbnailImage
		cell.avatarImageView.image = place.avatarImage
		cell.priceLabel.text = String(place.price)
		cell.currencyLabel.text = place.currency
		cell.unitLabel.text = place.unit
		cell.placeNameLabel.text = place.placeName
		cell.placeDescriptionLabel.text = place.shortDescription
		return cell
	}
    
	func collectionView(collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, sizeForItemAtIndexPath indexPath: NSIndexPath) -&gt; CGSize {
		return CGSize(width: 300, height: 350) }
}
</code></pre></div></div>

<ul>
  <li>It’s almost done. Your UI setup is ready to display data. We create some sample data to show now.</li>
  <li>Create new file <code class="highlighter-rouge">SampleData.swift</code> and add some codes
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class SampleData {
static let places = ["Ha Noi", "Hai Phong", "Trang An", "Hoi An", "Ho Chi Minh", "Bien Hoa", "My Tho", "Can Tho", "Tay Ninh", "Con Dao"]
static let avatars = ["Avatar1", "Avatar2", "Avatar3", "Avatar4", "Avatar5", "Avatar6", "Avatar7", "Avatar8", "Avatar9", "Avatar10"]
static let thumbnails = ["Place1", "Place2",  "Place3",  "Place4",  "Place5",  "Place6",  "Place7",  "Place8",  "Place9",  "Place10"]
static let prices: [Int64] = [5000000, 15000000, 18000000,  2000000, 25000000, 15000000, 9000000, 1000000, 12000000, 6000000]  
static let shortDescriptions = ["New BedRm by C.Park",
        "Cozy &amp; Private Floor of Brownstone",
        "AMAZING MANHATTAN SKYLIN",
        "Studio Apartment with King Bed",
        "Beautiful Midtown East",
        "Brooklyn Style - With a Balcony!!!",
        "Cozy Bedroom in Apartment",
        "Loft with Manhattan skyline view!",
        "Hell's Kitchen 1-Bdr. Apt. Share",
        "Green Room"]
    
static func generateFavouriteList() -&gt; [PlaceModel] {
    var favouriteList = [PlaceModel]()
    for _ in 0..&lt;10 {
        let randomIndex = randomInt(10)
        let place = PlaceModel()
        place.placeName = places[randomIndex]
        place.avatarImage = UIImage(named: avatars[randomIndex])
        place.thumbnailImage = UIImage(named: thumbnails[randomIndex])
        place.unit = "PER NIGHT"
        place.currency = "VND"
        place.price = prices[randomIndex]
        place.shortDescription = shortDescriptions[randomIndex]
        favouriteList.append(place)
    }
    return favouriteList
}
    
static func generateRecentlyList() -&gt; [PlaceModel] {
    var recentlyList = [PlaceModel]()    
    for _ in 0..&lt;10 {
        let randomIndex = randomInt(10)
        let place = PlaceModel()
        place.placeName = places[randomIndex]
        place.avatarImage = UIImage(named: avatars[randomIndex])
        place.thumbnailImage = UIImage(named: thumbnails[randomIndex])
        place.unit = "PER NIGHT"
        place.currency = "VND"
        place.price = prices[randomIndex]
        place.shortDescription = shortDescriptions[randomIndex]
        recentlyList.append(place)
    }
    return recentlyList;
}
    
static func generateSuggestionList() -&gt; [PlaceModel] {    
    var suggestionList = [PlaceModel]()
    for _ in 0..&lt;10 {
        let randomIndex = randomInt(10)
        let place = PlaceModel()
        place.placeName = places[randomIndex]
        place.avatarImage = UIImage(named: avatars[randomIndex])
        place.thumbnailImage = UIImage(named: thumbnails[randomIndex])
        place.unit = "PER NIGHT"
        place.currency = "VND"
        place.price = prices[randomIndex]
        place.shortDescription = shortDescriptions[randomIndex]
        suggestionList.append(place)
    }
    return suggestionList
}
    
static func randomInt(max: UInt32) -&gt; Int { return Int(arc4random_uniform(max)) }
}    
</code></pre></div>    </div>
  </li>
  <li>Please make sure you add 10 avatar images (Avatar1.png, Avatar2.png…, Avatar10.png) and 10 place images (Place1.png, Place2.png…, Place10.png)</li>
</ul>

<p>Run and enjoy.</p>

<h1 id="conclusion">Conclusion</h1>

<p>The main purpose is to show how nest a Collection View in a Table View. The Airbnb home has many things to do. 
You can download my project <a href="https://github.com/nguyentruongky/AirbnbHomescreenSample">at my github</a></p>


      <hr>

      <div class="clearfix">

        
        <a class="btn btn-primary float-left" href="/2016/01/19/Contact-picker.html" data-toggle="tooltip" data-placement="top" title="Contact Picker">&larr; Previous<span class="d-none d-md-inline"> Post</span></a>
        
        
        <a class="btn btn-primary float-right" href="/2016/01/29/embed-controller.html" data-toggle="tooltip" data-placement="top" title="Dynamically load view controller into another">Next<span class="d-none d-md-inline"> Post</span> &rarr;</a>
        

      </div>

    </div>
  </div>
</div>


    <!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">

        <!-- Twitter -->
          

          <!-- Skype -->
          
          <li class="list-inline-item">
            <a href="skype:nguyentruongky3390?chat">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-skype fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          <!-- Mail -->
          
          <li class="list-inline-item">
            <a href="mailto:nguyentruongky33@gmail.com?subject=Hello">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          <!-- Facebook -->
          

          <!-- Github -->
          
          <li class="list-inline-item">
            <a href="https://github.com/nguyentruongky">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          <!-- Linkedin -->
          
          <li class="list-inline-item">
            <a href="https://www.linkedin.com/in/nguyentruongky3390">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

        </ul>
        <p class="copyright text-muted">Copyright &copy; Ky Nguyen 2018</p>
      </div>
    </div>
  </div>
</footer>


    <script src="/assets/vendor/jquery/jquery.min.js"></script>
<script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js"></script>

<script src="/assets/scripts.js"></script>




  </body>

</html>
